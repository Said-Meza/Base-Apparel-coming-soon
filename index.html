<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" href="style.css">
  <title>Frontend Mentor | Base Apparel coming soon page</title>

 
</head>
<body>


    <figure class="figure__logo container">
      <img class="logo" src="images/logo.svg" alt="logo">
    </figure>

    <figure class="figure__img">
        <div class="img"></div>
    </figure>

    <div class="content">

      <h1 class="content__title">  We're <span class="span">coming soon</span></h1>
      <p class="content__paragrph">  Hello fellow shoppers! We're currently building our new fashion store. 
        Add your email below to stay up-to-date with announcements and our launch deals.</p>

        <form class="form" action="#">
          
          <input class="form__email" required placeholder="Email Address" type="email" name="email" id="email"
          pattern="^[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})$">
          <span class="error__icon"><img class="error__img" src="images/icon-error.svg" alt="error"> </span>
            
          <button class="form__button"><img class="arrow" src="images/icon-arrow.svg" alt="arrow"></button>
          
        </form>
    </div>

    <div class="backgraound">

    </div>

  
  <!-- <footer>
    <p class="attribution">
      Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
      Coded by <a href="#">Your Name Here</a>.
    </p>
  </footer> -->

  <script>
    const d= document,
    $form=d.querySelector(".form");
    $formlabel=d.querySelector(".form");
    
    const $label= d.createElement("label");
          $label.id="label";
          $label.textContent=`error, please provide a valid email`;
          $label.classList.add("error");
        $formlabel.insertAdjacentElement("afterbegin",$label);

    d.addEventListener("keyup",e=>{

      if(e.target.matches(".form__email")){
        // console.log(e.target.value,`si iso matches`)

        let $input=e.target,
                pattern=$input.pattern || $input.dataset.pattern;
                // console.log($input,pattern)

                function active(){
                  d.getElementById("label").style.display="block"
                  d.querySelector(".error__icon").style.display="block"
                }
                function noactive(){
                  d.getElementById("label").style.display="none";
                  d.querySelector(".error__icon").style.display="none"
                } 

            if (pattern && $input.value!=="") {
              //  console.log("el input tiene patron");
              //  console.log($input.value);
              //  console.log($input.name);

                let regex = new RegExp(pattern);
                return !regex.exec($input.value)
                ? active()
                :noactive();
    
            }
            // if(!pattern){
            //     console.log("no tiene patron")
            //     return $input.value===""
            //     ?d.getElementById("label").style.display="block"
            //     :d.getElementById("label").style.display="none";
            // }

      }

    })


  </script>
</body>
</html>